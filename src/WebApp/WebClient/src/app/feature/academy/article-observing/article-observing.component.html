<!-- <div class="vertical-alignment">
    <button (click)="toggleMenu()" class="btn button-square custom-button-onlight-reward">{{buttonText}}</button>
</div> -->

<div class="grid">
    <div class="col-12">
        <div class="tittle">
            <div class="text-center ">
              <h1 class="section-header-title mt-1">SELECT ARTICLE</h1>
            </div>
          </div>
        <p-dataView #dv [paginator]="false" [value]="articleEntities" filterBy="createDateTime" [sortField]="sortField" [sortOrder]="sortOrder" layout="list">
            <ng-template pTemplate="header">
                <div class="flex flex-column md:flex-row md:justify-content-between gap-2">
                    <p-dropdown [options]="sortDateOptions" placeholder="Sort By Date"
                        (onChange)="onSortChange($event)"></p-dropdown>
                    <span class="p-input-icon-left">
                        <i class="pi pi-search"></i>
                        <input type="search" pinputtext=""
                            placeholder="Search by Name" class="p-inputtext p-component p-element" (input)="onFilter(dv, $event)"></span>
                    <button pButton pRipple type="button" label="FILTER ARTICLES" (click)="toggleMenu()"></button>
                    <!-- <p-dataViewLayoutOptions></p-dataViewLayoutOptions> -->
                </div>
            </ng-template>

            <ng-template let-products pTemplate="listItem">
                <div class="col-12" *ngFor="let item of products; let first = first">
                    <app-article-card-item [article]="item" (nodeSelected)="nodeSelect($event)" ></app-article-card-item>
                </div>
            </ng-template>

            <!-- TODO: add grid Item -->
            <!-- <ng-template let-products pTemplate="gridItem">
                <div class="grid grid-nogutter">
                    <div class="col-12 md:col-4" *ngFor="let product of products">
                        <div class="card m-3 border-1 surface-border">
                            <div class="flex flex-wrap gap-2 align-items-center justify-content-between mb-2">
                                <div class="flex align-items-center">
                                    <i class="pi pi-tag mr-2"></i>
                                    <span class="font-semibold">{{product.category}}</span>
                                </div>
                                <span
                                    [class]="'product-badge status-' + product.inventoryStatus.toLowerCase()">{{product.inventoryStatus}}</span>
                            </div>
                            <div class="flex flex-column align-items-center text-center mb-3">
                                <img [src]="'assets/demo/images/product/' + product.image" [alt]="product.name"
                                    class="w-9 shadow-2 my-3 mx-0" />
                                <div class="text-2xl font-bold">{{product.name}}</div>
                                <div class="mb-3">{{product.description}}</div>
                            </div>
                            <div class="flex align-items-center justify-content-between">
                                <span class="text-2xl font-semibold">${{product.price}}</span>
                                <p-button icon="pi pi-shopping-cart"
                                    [disabled]="product.inventoryStatus === 'OUTOFSTOCK'"></p-button>
                            </div>
                        </div>
                    </div>
                </div>
            </ng-template> -->
        </p-dataView>
        <p-paginator (onPageChange)="onPageChange($event)" [first]="first" [rows]="rows" [totalRecords]="totalCount" ></p-paginator>
    </div>
</div>

<div class="overlay-container">
    <div *ngIf="tags.length> 0 && technologies.length > 0">
        <p-dialog header="Header" [visible]="visible" [modal]="true" [style]="{ width: '50rem', height: '50rem', maxHeight: '50rem'}"
            [breakpoints]="{ '1199px': '75vw', '575px': '90vw' }">
            <ng-template pTemplate="header">
                <div class="">
                    <h5 class="brown-text-title">Select Tree Tag</h5>
                    <p class="brown-text-title" style="font-size: 1em;">*selected tag instaly apply to filter</p>
                </div>
            </ng-template>
            <div class="side-container" style="max-height: 50rem;">
                <section>
                    <div class="justify-content-center tree-view-container">
                        <p-toast [baseZIndex]="100" [autoZIndex]="true">
                            <ng-template let-message pTemplate="headless" let-closeFn="closeFn">
                                <section class="flex p-3 gap-3 w-full toast-card" style="border-radius: 10px; ">
                                    <div class="flex flex-column gap-3 w-full">
                                        <p class="m-0 font-semibold text-base text-brown">{{ message.summary }}</p>
                                        <p class="m-0 text-base text-700 text-brown">{{ message.detail }}</p>
                                    </div>
                                </section>
                            </ng-template>
                        </p-toast>
                        <p-tree [value]="nodes" class="w-full" selectionMode="single" [propagateSelectionUp]="false"
                            [propagateSelectionDown]="false" [selection]="selectedNodes"
                            (onNodeSelect)="nodeSelect($event)" (onNodeUnselect)="nodeUnselect($event)"
                            ></p-tree>
                    </div>
                </section>
            </div>
            <ng-template pTemplate="footer">
                <p-button icon="pi pi-check" (click)="visible = false" label="Close" pAutoFocus [autofocus]="true"></p-button>
            </ng-template>
        </p-dialog>
    </div>
</div>
